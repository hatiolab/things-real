<html>

<head>
  <style>
  #scene {
    width: 100%;
    height: 500px;
  }
  </style>
  <script src="../../things-real.js"></script>
</head>

<body>
  <h1>3D Modeling Library - REAL</h1>
  <div id="scene"></div>

  <script type="module">
    import { html, render } from '../../node_modules/lit-html/lit-html.js';

    var {
      Scene,
      SceneMode,
      FitMode
    } = REAL;

    var scale = {
      x: 10,
      y: 10,
      z: 10
    }
    var translate = {
      x: 50,
      y: 1,
      z: 1
    }
    var rotate = {
      x: 0.1,
      y: 0.2,
      z: 0.3
    }

    var scene = new Scene({
      targetEl: 'scene',
      mode: SceneMode.EDIT,
      model: {
        width: 200,
        height: 300,
        components: [{
          id: 'first-cube',
          type: 'cube'
        }].concat(Array.from(Array(100).keys()).map(idx => {
          return {
            type: 'cube',
            scale: {
              x: 2,
              y: 2,
              z: 2
            },
            translate: {
              x: Number(idx) * 10 - 500,
              y: Number(idx) * 10 - 500,
              z: Number(idx) * 10 - 500
            },
            rotate: {
              x: 0.1,
              y: 0.2,
              z: 0.3
            }
          }
        }))
      },
      fit: FitMode.BOTH
    })

    setInterval(() => {
      scene.findAll('cube').forEach(cube => {
        let r = cube.state.rotate || rotate

        cube.set('rotate', {
          x: r.x + 0.01,
          y: r.y + 0.01,
          z: r.z + 0.01
        })
      })
    }, 1)

  </script>
</body>

</html>